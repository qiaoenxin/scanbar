/*!
 * Copyright &copy; 2012-2013 <a href="https://github.com/thinkgem/jeesite">JeeSite</a> All rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 */
function include(c, m, e) {
	if (document.getElementById(c) == null) {
		var a = typeof e == "string" ? [ e ] : e;
		for ( var f = 0; f < a.length; f++) {
			var b = a[f].replace(/^\s|\s$/g, "");
			var h = b.split(".");
			var d = h[h.length - 1].toLowerCase();
			var k = d == "css";
			var l = k ? "link" : "script";
			var g = k ? " type='text/css' rel='stylesheet' "
					: " type='text/javascript' ";
			var j = (k ? "href" : "src") + "='" + m + b + "'";
			document.write("<" + l + (f == 0 ? " id=" + c : "") + g + j + "></"
					+ l + ">")
		}
	}
}
function windowOpen(d, c, e, a) {
	var g = parseInt((window.screen.height - a) / 2, 10), f = parseInt(
			(window.screen.width - e) / 2, 10), b = "location=no,menubar=no,toolbar=no,dependent=yes,minimizable=no,modal=yes,alwaysRaised=yes,resizable=yes,scrollbars=yes,width="
			+ e + ",height=" + a + ",top=" + g + ",left=" + f;
	window.open(d, c, b)
}
function loading(a) {
	top.$.jBox.tip.mess = null;
	top.$.jBox.tip(a, "loading", {
		opacity : 0
	})
}
function confirmx(b, a) {
	top.$.jBox.confirm(b, "系统提示", function(c, d, e) {
		if (c == "ok") {
			loading("正在提交，请稍等...");
			location = a
		}
	}, {
		buttonsFocus : 1
	});
	top.$(".jbox-body .jbox-icon").css("top", "55px");
	return false
}
$(document).ready(function() {
	
	$("select").select2();
	$(".fancybox").fancybox()
	
	theadCheckbox = $('table thead input[type="checkbox"]');
	tbodyCheckbox = $('table tbody input[type="checkbox"]');
	
    theadCheckbox.click(function(){
    	var table = $(this).parent().parent().parent().parent();
    	var checked = $(this).attr('checked');
    	if(checked){
    		table.find('tbody input[type="checkbox"]').attr('checked','checked');
    	}else{
    		table.find('tbody input[type="checkbox"]').removeAttr('checked');
    	}
    });
    
   	tbodyCheckbox.click(function(){
   		var table = $(this).parent().parent().parent().parent();
    	var len = table.find('tbody input[type="checkbox"]').length;
    	var _len = table.find('tbody input[type=checkbox]:checked').length;
    	if(len == _len){
    		table.find('thead input[type="checkbox"]').attr('checked','checked');
    	}else{
    		table.find('thead input[type="checkbox"]').removeAttr('checked');
    	}
    });
});


function getCheckedIds(tip){
	var ids = new Array();
	$('table tbody input[type=checkbox]:checked').each(function(){
		var id = $(this).val();
		ids.push(id);
	});
	if(ids.length == 0){
		top.$.jBox.tip(tip,"error",{persistent:true,opacity:0});
	}
	return ids;
}